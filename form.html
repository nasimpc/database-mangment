<html>

<head>


    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.O">
        <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"></script>
    </head>
</head>


<body>
    <div class="continer">
        <div class="row" style="height: 100%;">
            <div id="sidebar" class="col-3 bg-danger-subtle">

                <p></p>

                <button class="btn btn-primary company">Company</button>

                <p></p>

                <button class="btn btn-primary expense">Expense</button>

                <p></p>

                <button class="btn btn-primary candy">Candy store managment</button>
                <p></p>

                <button class="btn btn-primary ">Create Table</button>


            </div>
            <div class="col-9 bg-primary-subtle">
                <div id="company" class="d-none">
                    <form onsubmit="saveToCompany(event)">
                        <label class="form-label"> Company name</label>
                        <input id="name" type="text" name="name" class="form-control" />
                        <label class="form-label"> Pros</label>
                        <input id="pros" type="text" name="pros" class="form-control" />
                        <label class="form-label"> Cons</label>
                        <input id="cons" type="text" name="cons" class="form-control" />
                        <p></p>
                        <div class="rating">
                            <label>
                                <input type="radio" name="stars" value="1" />
                                <span class="icon">★</span>
                            </label>
                            <label>
                                <input type="radio" name="stars" value="2" />
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                            </label>
                            <label>
                                <input type="radio" name="stars" value="3" />
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                            </label>
                            <label>
                                <input type="radio" name="stars" value="4" />
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                            </label>
                            <label>
                                <input type="radio" name="stars" value="5" />
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                                <span class="icon">★</span>
                            </label>
                        </div>
                        <br>
                        <p></p>
                        <button class="btn btn-primary"> Submit </button><br>

                    </form>
                </div>
                <div id="expense" class="d-none">
                    <form onsubmit="saveToExpense(event)">
                        <label> Category</label>
                        <input id="category" type="text" name="category" required />
                        <label> Expense</label>
                        <input id="expense" type="number" name="expense" required />
                        <button> Submit </button><br>

                    </form>

                </div>
                <div id="candy" class="d-block">
                    <h1>Form</h1>
                    <form onsubmit="saveToCandy(event)">
                        <label> Candy Name</label>
                        <input id="name" type="text" name="name" required />
                        <label> Description</label>
                        <input id="description" type="text" name="description" required />
                        <label> price</label>
                        <input id="price" type="number" name="price" />
                        <label> Quantity</label>
                        <input id="quantity" type="number" name="quantity" />
                        <button> Add Item </button><br>

                    </form>
                    <p id="b"></p>
                </div>
            </div>


        </div>
    </div>
    <br>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <script>

        var body = document.getElementById('sidebar');
        body.addEventListener('click', editItem);
        var x;
        $(':radio').change(function () {
            x = this.value;
            console.log('New star rating: ' + this.value);
        });

        function saveToCompany(e) {
            e.preventDefault();

            const name = event.target.name.value;
            const pros = event.target.pros.value;
            const cons = event.target.cons.value;
            const rating = x;

            const obj = {
                name: name,
                pros: pros,
                cons: cons,
                rating: rating
            }

            axios.post("http://localhost:3000/company/add-company", obj)


        }
        function saveToCandy(e) {
            e.preventDefault();
            const name = event.target.name.value;
            const description = event.target.description.value;
            const price = event.target.price.value;
            const quantity = event.target.quantity.value;

            const obj = {
                name: name,
                description: description,
                price: price,
                quantity: quantity
            }
            const postDetails = axios.post("http://localhost:3000/candy/add-candy", obj);


        }
        // window.addEventListener("DOMContentLoaded", async () => {
        async function editItem(e) {
            console.log('hi');
            if (e.target.classList.contains('company')) {
                var expense = document.querySelector('#expense');
                expense.className = "d-none";
                var candy = document.querySelector('#candy');
                candy.className = "d-none";
                var company = document.querySelector('#company');
                company.className = "d-block";

            }
            else if (e.target.classList.contains('candy')) {
                var expense = document.querySelector('#expense');
                expense.className = "d-none";
                var candy = document.querySelector('#candy');
                candy.className = "d-block";
                var company = document.querySelector('#company');
                company.className = "d-none";

            }
            else if (e.target.classList.contains('expense')) {
                var expense = document.querySelector('#expense');
                expense.className = "d-block";
                var candy = document.querySelector('#candy');
                candy.className = "d-none";
                var company = document.querySelector('#company');
                company.className = "d-none";

            }
        }
        async function expenses() {
            const getDetails = axios.get("https://crudcrud.com/api/f3dd528908db4ddf9a52ded1320e7d0e/candy")

            let res = await getDetails;
            for (var i = 0; res.data.length; i++) {

                showNewUserOnScreen(res.data[i])
            }

        }
        function show(text1, text2) {
            var newText = document.createTextNode(text1);
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("br");
            var div = document.createElement('div');
            div.appendChild(newText);
            div.appendChild(linebreak);

            a.insertBefore(div, b);

            var newText = document.createTextNode(text2);
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("hr");
            var div = document.createElement('div');
            div.appendChild(newText);
            div.appendChild(linebreak);

            a.insertBefore(div, b);


        }
        async function saveToExpense(e) {
            e.preventDefault();
            const category = event.target.category.value;
            const expense = event.target.expense.value;

            const obj = {
                category: category,
                expense: expense,
            }
            const expenseDetails = axios.post("http://localhost:3000/expense/add-expense", obj)
            let res = await expenseDetails;
            showNewExpenseOnScreen(res.data.newExpenseDetail)
        }
        //show details on screen
        function showNewExpenseOnScreen(obj, ID = '1qazx234rfvrrf') {
            console.log(obj.id, obj, 'hi');

            if (obj.id) {
                ID = obj.id;
            }
            //var newText = document.createTextNode(obj['pros'] + ' ' + obj['cons'] + ' ' + obj['rating']);
            //var newText = document.createTextNode('nasim');
            // Add text to div
            var newText = document.createTextNode('Pros :');
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("br");
            var div = document.createElement('div');
            div.appendChild(newText);

            //delete btn
            // var deleteBtn = document.createElement('button');
            // var editBtn = document.createElement('button');

            // deleteBtn.className = 'btn btn-sm float-right delete';
            // editBtn.className = 'btn btn-sm float-right';

            // deleteBtn.appendChild(document.createTextNode('X'));
            // editBtn.appendChild(document.createTextNode('Edit'));

            // div.appendChild(editBtn);
            // div.appendChild(deleteBtn);
            div.appendChild(linebreak);

            a.insertBefore(div, b);


            var newText = document.createTextNode(obj['pros']);
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("br");
            var div = document.createElement('div');
            div.appendChild(newText);
            div.appendChild(linebreak);

            a.insertBefore(div, b);


            var newText = document.createTextNode('cons :');
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("br");
            var div = document.createElement('div');
            div.appendChild(newText);
            div.appendChild(linebreak);

            a.insertBefore(div, b);

            var newText = document.createTextNode(obj['cons']);
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("br");
            var div = document.createElement('div');
            div.appendChild(newText);
            div.appendChild(linebreak);

            a.insertBefore(div, b);

            var newText = document.createTextNode("rating : " + obj['rating']);
            var a = document.querySelector('#a');
            var b = document.querySelector('#b');
            linebreak = document.createElement("hr");
            var div = document.createElement('div');
            div.appendChild(newText);
            div.appendChild(linebreak);

            a.insertBefore(div, b);
        }
        // // Remove item
        // function editItem(e) {

        //     if (e.target.classList.contains('delete')) {

        //         if (confirm('Are You Sure?')) {
        //             var div = e.target.parentElement;
        //             body.removeChild(div);

        //             var id = div.id;
        //             axios.delete(`http://localhost:3000/expense/delete-expense/${id}`);
        //         }
        //     }
        //     else if (e.target.classList.contains('btn-sm')) {

        //         var div = e.target.parentElement;
        //         var id = div.id;
        //         var words = div.firstChild.wholeText.split(" ");

        //         body.removeChild(div);
        //         var category = document.getElementById('category');
        //         category.value = words[0];
        //         var expense = document.getElementById('expense');
        //         expense.value = words[1];
        //         axios.delete(`http://localhost:3000/expense/delete-expense/${id}`);

        //     }
        // }

    </script>
</body>

</html>